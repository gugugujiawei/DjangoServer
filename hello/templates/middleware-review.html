<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>运营管理中心 - Bootstrap Admin Theme</title>

    <!-- Bootstrap Core CSS -->
    <link href="/static/css/bootstrap.min.css" rel="stylesheet">

    <!-- MetisMenu CSS -->
    <link href="/static/css/plugins/metisMenu/metisMenu.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="/static/css/sb-admin-2.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="/static/font-awesome-4.1.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
	
	<!-- jQuery Version 1.11.0 -->
    <script src="/static/js/jquery-1.11.0.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="/static/js/bootstrap.min.js"></script>

    <!-- Metis Menu Plugin JavaScript -->
    <script src="/static/js/plugins/metisMenu/metisMenu.min.js"></script>

    <!-- Custom Theme JavaScript -->
    <script src="/static/js/sb-admin-2.js"></script>
    
    <!-- DataTables JavaScript -->	
    <script src="/static/js/plugins/dataTables/jquery.dataTables.js"></script>
	
    <script src="/static/js/plugins/dataTables/dataTables.bootstrap.js"></script>
    
	<!-- Page-Level Demo Scripts - Tables - Use for reference -->
    <script>
    $(document).ready(function() {
        $('#dataTables-midware').dataTable();
    });
    $(document).ready(function() {
        $('#dataTables-midware-history').dataTable();
    });	
    </script>	        

</head>

<body>

    <div id="wrapper">

        <!-- Navigation -->
        <nav class="navbar navbar-default navbar-static-top" role="navigation" style="margin-bottom: 0">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="index.html"><font size="+2" color="#6699FF" style="margin-left:30px">运营管理中心</font></a>
            </div>
            <!-- /.navbar-header -->

            <ul class="nav navbar-top-links navbar-right">
                <li class="dropdown">
                
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                        <i class="fa fa-envelope fa-fw"></i>  <i class="fa fa-caret-down"></i>
                        <span class="label label-warning">3</span>
                    </a>
                    <ul class="dropdown-menu dropdown-messages">
                    	<li class="header"><font color="#000000" size="+2" style="margin-left:20px">系统消息：</font></li>
                        <li class="divider"></li>
                        <li>
                            <a href="#">
                                <div>
                                    <strong>设备厂商一</strong>
                                    <span class="pull-right text-muted">
                                        <em>5 min ago</em>
                                    </span>
                                </div>
                                <div>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque eleifend...</div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="#">
                                <div>
                                    <strong>设备厂商二</strong>
                                    <span class="pull-right text-muted">
                                        <em>6 min ago</em>
                                    </span>
                                </div>
                                <div>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque eleifend...</div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="#">
                                <div>
                                    <strong>设备厂商三</strong>
                                    <span class="pull-right text-muted">
                                        <em>7 min ago</em>
                                    </span>
                                </div>
                                <div>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque eleifend...</div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a class="text-center" href="#">
                                <strong>查看全部</strong>
                                <i class="fa fa-angle-right"></i>
                            </a>
                        </li>
                    </ul>
                    <!-- /.dropdown-messages -->
                </li>
                <!-- /.dropdown -->



                <li class="dropdown">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                        <i class="fa fa-bell fa-fw"></i>  <i class="fa fa-caret-down"></i>
                        <span class="label label-warning">5</span>                        
                    </a>
                    <ul class="dropdown-menu dropdown-alerts">
                    	<li class="header"><font color="#000000" size="+2" style="margin-left:20px">业务消息：</font></li>
                        <li class="divider"></li>                    
                        <li>
                            <a href="#">
                                <div>
                                    <i class="fa fa-comment fa-fw"></i> New Comment
                                    <span class="pull-right text-muted small">4 minutes ago</span>
                                </div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="#">
                                <div>
                                    <i class="fa fa-twitter fa-fw"></i> 3 New Followers
                                    <span class="pull-right text-muted small">12 minutes ago</span>
                                </div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="#">
                                <div>
                                    <i class="fa fa-envelope fa-fw"></i> Message Sent
                                    <span class="pull-right text-muted small">4 minutes ago</span>
                                </div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="#">
                                <div>
                                    <i class="fa fa-tasks fa-fw"></i> New Task
                                    <span class="pull-right text-muted small">4 minutes ago</span>
                                </div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="#">
                                <div>
                                    <i class="fa fa-upload fa-fw"></i> Server Rebooted
                                    <span class="pull-right text-muted small">4 minutes ago</span>
                                </div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a class="text-center" href="#">
                                <strong>查看全部</strong>
                                <i class="fa fa-angle-right"></i>
                            </a>
                        </li>
                    </ul>
                    <!-- /.dropdown-alerts -->
                </li>
                <!-- /.dropdown -->
                <li class="dropdown">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                        <i class="fa fa-user fa-fw"></i>  <i class="fa fa-caret-down"></i>
                    </a>
                    <ul class="dropdown-menu dropdown-user">
                        <li><a href="#"><i class="fa fa-user fa-fw"></i> 用户概况</a>
                        </li>
                        <li><a href="#"><i class="fa fa-gear fa-fw"></i> 设置</a>
                        </li>
                        <li class="divider"></li>
                        <li><a href="login.html"><i class="fa fa-sign-out fa-fw"></i> 退出登录</a>
                        </li>
                    </ul>
                    <!-- /.dropdown-user -->
                </li>
                <!-- /.dropdown -->
            </ul>
            <!-- /.navbar-top-links -->

            <div class="navbar-default sidebar" role="navigation">
                <div class="sidebar-nav navbar-collapse">
                    <ul class="nav" id="side-menu">
                        <li class="sidebar-search">
                            <div class="input-group custom-search-form">
                                <input type="text" class="form-control" placeholder="Search...">
                                <span class="input-group-btn">
                                <button class="btn btn-default" type="button">
                                    <i class="fa fa-search"></i>
                                </button>
                            </span>
                            </div>
                            <!-- /input-group -->
                        </li>
                        <li>
                            <a href="index.html"><i class="fa fa-dashboard fa-fw"></i>系统监控</a>
                        </li>

                        <li class="active">
                            <a href="#"><i class="fa fa-wrench fa-fw"></i> 审核业务<span class="fa arrow"></span></a>
                            <ul class="nav nav-second-level">
                                <li>
                                    <a href="user-review.html">用户审核业务</a>
                                </li>
                                <li>
                                    <a href="device-review.html">设备审核业务</a>                                  
                                </li>
                                <li>
                                    <a class="active" href="middleware-review.html">中间件审核业务</a>
                                </li>
                            </ul>
                            <!-- /.nav-second-level -->
                        </li>
                        <li>
                            <a href="#"><i class="fa fa-sitemap fa-fw"></i> 中间件业务<span class="fa arrow"></span></a>
                            <ul class="nav nav-second-level">
                                <li>
                                    <a href="#">中间件测试部署</a>
                                </li>
                                <li>
                                    <a href="#">中间件测试验收</a>
                                </li>
                                <li>
                                    <a href="#">中间件入库上线 <span class="fa arrow"></span></a>
                                </li>
                            </ul>
                            <!-- /.nav-second-level -->
                        </li>
                        <li>
                            <a href="kvm-manage.html"><i class="fa fa-table fa-fw"></i> KVM管理</a>
                        </li>
                        <li>
                            <a href="server-info.html"><i class="fa fa-edit fa-fw"></i>服务器信息概要</a>
                        </li>                        
                    </ul>
                </div>
                <!-- /.sidebar-collapse -->
            </div>
            <!-- /.navbar-static-side -->
        </nav>

        <div id="page-wrapper">
        
            <div class="row">
                <div class="col-lg-12">
                    <h1 class="page-header">用户未审核业务</h1>
                </div>
                <!-- /.col-lg-12 -->
            </div>





            <div class="row">
	            <!--col-lg-12-->
                <div class="col-lg-12">
                    <div class="panel panel-info">
                        <div class="panel-heading">
                            <font size="+1">中间件审核业务</font>
                        </div>
                        <div class="panel-body">
                        
                        
						<div class="table-responsive">
        	            <script type="text/javascript">
						
							 var check_list=[];						
						
                    		 $(document).on("click","#chk_all",function(){
 							 var ischecked= $("#chk_all:checked").length;
							 var $checkboxs =$("input[name='transPro']");
							 if(ischecked){
							 $checkboxs.prop("checked",true);
						 	 }else{
							 $checkboxs.prop("checked",false);							 
							 }
							 });
							 
							 $(document).ready(function(){
								 $("input[name='pass']").click(function(){
								 check("hidden-value");
						     });
							 });
							 
							 $(document).ready(function(){
								 $("input[name='not-pass']").click(function(){
								 check("hidden-value2");
						     });
							 });							 
							 
						     function check(name){
								 check_list=[];
								 var rowsize = document.getElementById('midware-body').getElementsByTagName('tr').length;
								 for (var i=0;i<rowsize;i++){
									 tmp="input[value=\""+i+"\"]";
									 tmp=tmp+":checked"
									 var ischecked= $(tmp).length;
											
									 if(ischecked){										 
										 var td = document .getElementById ("dataTables-midware").rows [i+1].cells[5].innerHTML; 
										 check_list.push(td);										 
									 }
								 }
								 if(check_list.length){
									 document.getElementById(name).value = check_list;
								 }
							 }	
							 
							 function check_submit(){
								 if(check_list.length){									 
									 return true;
								 }
								 else 
								 	 return false;								 
							 }							 
		                </script>                        
                                <table class="table table-striped table-bordered table-hover" id="dataTables-midware">
                                    <thead>
                                        <tr>
                                            <th><input type="checkbox" name="chk_all" id="chk_all"/><span> </span>选择</th>
                                            <th>设备厂商</th>                                             
                                            <th>中间件版本</th>   
                                            <th>设配型号</th>       
                                            <th>提交时间</th>                                   
                                            <th>用户id</th>
                                        </tr>
                                    </thead>
                                    {% if midware %}
                                    <tbody id="midware-body">
                                    <!-- 样式
                                        <tr>
                                            <td><input type="checkbox" name="transPro" value="message1"></td>
                                            <td>华为</td>
                                            <td>卫星链路</td>                                           
                                            <td>GTM</td>
                                            <td>版本1.0</td>       
                                            <td>2014-11-06 14:54:03</td>                                      
											<td>用户id/td>                                            
                                        </tr>
                                        -->
										{% for u in midware %}
										<tr id={{forloop.counter0}}>
                                            		<td><input type="checkbox" name="transPro" value={{forloop.counter0}}></td>
                                            {% for item in u %}
                                            	{% ifequal forloop.counter0 4 %}
		                                            <td id="userid">{{item}}</td>   
                                                {% else %}
		                                            <td>{{item}}</td>     
                                                {% endifequal %}                                              
                                            {% endfor %}										
										</tr>
										{% endfor %}                                        
                                    </tbody>
                                    {% endif %}
                                </table>
                            </div>
                            
                           
                        </div>
                        <div class="panel-footer">                                                                                    
							<script type="text/javascript">
                                 $(document).on("click","#allSelect",function(){
                                 var $checkboxs =$("input[name='transPro']");
                                 $checkboxs.prop("checked",true);
                                 });
                                 
                                 $(document).on("click","#noneSelect",function(){
                                 var $checkboxs =$("input[name='transPro']");
                                 $checkboxs.prop("checked",false);
                                 });
                            </script>   
                            <form method="post" onSubmit="return check_submit()">  
                            	{% csrf_token %}	                            							
                                <a href="javascript:void(0)" id="allSelect" >全部</a>
                                <a >-</a>                        
                                <a href="javascript:void(0)" id="noneSelect" >无</a>
                                <a >-</a>                         
                                <input type="hidden" name="content" id="hidden-value"></input>                    
                                <input type="submit" class="btn btn-primary" name="pass" value="通过所选"></input>
                                <input type="hidden" name="content2" id="hidden-value2"></input>
                                <input type="submit" class="btn btn-primary" name="not-pass" value="删除所选"></input>   
                                <p style="float:right">
                                <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#myModal">新增中间件</button>
                                </p>
                            </form>                         
                        </div>
 
                    </div>
                </div>
                <!--col-lg-12-->
            </div>
            
            <div aria-hidden="true" aria-labelledby="myModalLabel" class="modal fade" id="myModal" role="dialog" tabindex="-1">
            	<div class="modal-dialog">
                	<div class="modal-content">
                 		<div class="modal-header" style="background:#d9edf7">
                  			<button aria-hidden="true" class="close" data-dismiss="modal" type="button">
                   			×
                  			</button>
                  			<h4 class="modal-title" id="myModalLabel">
                   				新增中间件信息
                 			</h4>
                 		</div>                                                
                        
        	            <script type="text/javascript">
								
   							 var url="";										
							 var message_list=[];
							 var message_item=['middlewarename','devicecompany','midwaremsg','md5','devicetype']		 
							 $(document).ready(function(){
								 $("input[name='addButton']").click(function(){
								 check_message();								  								 
						     });
							 });
							 							 
							 
						     function check_message(){
								 message_list=[];
								 
								 for(var i=0;i<message_item.length;i++){
									value=document.getElementById(message_item[i]).value;									
									if(value=='')
										break;
									else
										message_list.push(value); 
								 }							 								 
								 if(message_list.length!=5){
								 	alert("您输入的信息不全，请重新输入！");	
									return;								
								 }
								 post_message();
								 window.close();
							 }	
							 
							 function post_message(){
								 data={'middlewarename':message_list[0],'devicecompany':message_list[1],'midwaremsg':message_list[2],'md5':message_list[3],'devicetype':message_list[4]};

								 $.post($(this).attr('action'), data, function(data,status,xhr){										
										window.location.reload();
								  });
							 }
		                </script>                         
                        
                        
                 		<div class="modal-body form-horizontal">                        	
	                            <div class="form-group">
                                    <label for="middlewarename" class="col-sm-2 control-label">中间件名称</label>
                                    <div class="col-sm-10">
	                                    <input type="text" class="form-control" id="middlewarename" placeholder="中间件名称">
                                    </div>
								</div>
                                <div class="form-group">
                                    <label for="devicecompany" class="col-sm-2 control-label">设备公司</label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control" id="devicecompany" placeholder="设备公司">
                                    </div>
                                </div>  
                                <div class="form-group">                         
                                    <label for="midwaremsg" class="col-sm-2 control-label">中间件信息</label>
                                    <div class="col-sm-10">
	                                    <input type="text" class="form-control" id="midwaremsg" placeholder="中间件信息"></input> 
                                    </div>
                                </div>
	                            <div class="form-group">
                                    <label for="md5" class="col-sm-2 control-label">md5</label>
                                    <div class="col-sm-10">
	                                    <input type="text" class="form-control" id="md5" placeholder="md5">
                                    </div>
								</div>
	                            <div class="form-group">
                                    <label for="devicetype" class="col-sm-2 control-label">设备类型</label>
                                    <div class="col-sm-10">
	                                    <input type="text" class="form-control" id="devicetype" placeholder="设备类型">
                                    </div>
								</div>                                                                                         
                 		</div>
                 		<div class="modal-footer">
	                        <input type="hidden" name="add-name" id="add-id"></input>
                  			<button class="btn btn-default" data-dismiss="modal" type="button">关闭</button>
    	             		<input class="btn btn-primary" type="submit" name="addButton" value="确定"></input>
                	 	</div>                        
                                                                   
                        
                	</div>
               	</div>
            </div>            
            
            <div class="row">
                <div class="col-lg-12">
                    <h1 class="page-header">最近已审核业务日志</h1>
                </div>

				<div class="col-lg-3 pull-right">
                	<select name="dataTables-example_length" aria-controls="dataTables-example" class="form-control input-sm"><option value="0" selected="true">今天</option><option value="10">最新一周</option><option value="20">最新一月</option><option value="30">最新一年</option></select>
            	</div>
                <!-- /.col-lg-12 -->
            </div>

			</br>
            <div class="row">
	            <!--col-lg-12-->
                <div class="col-lg-12">
                    <div class="panel panel-info">
                        <div class="panel-heading">
                            <font size="+1">已审核日志记录</font>
                        </div>
                        <div class="panel-body">
                        
                        
						<div class="table-responsive">
        	            <script type="text/javascript">
                    		 $(document).on("click","#chk_all2",function(){
 							 var ischecked= $("#chk_all2:checked").length;
							 var $checkboxs =$("input[name='transPro2']");
							 if(ischecked){
							 $checkboxs.prop("checked",true);
						 	 }else{
							 $checkboxs.prop("checked",false);							 
							 }
							 });
							 
							 $(document).ready(function(){
								 $("input[name='recover']").click(function(){
								 check2("hidden-value3");
						     });
							 });							 
							 
						     function check2(name){
								 check_list2=[];
								 var rowsize = document.getElementById('midware-history-body').getElementsByTagName('tr').length;
								 for (var i=0;i<rowsize;i++){
									 //tmp="input[value=\"message"+i+"\"]";
									 tmp="input[value=\""+i+i+"\"]";
									 //tmp="input[value=11]";
									 tmp=tmp+":checked"
									 var ischecked= $(tmp).length;
											
									 if(ischecked){		
										 var td = document .getElementById ("dataTables-midware-history").rows [i+1].cells[5].innerHTML; 
										 check_list2.push(td);										 
									 }
								 }
								 if(check_list2.length){
									 var ret = window.confirm("确定要恢复所选？");
									 if(ret){
										 document.getElementById(name).value = check_list2;
									 }
									 else{
										 check_list2=[];
									 }									 
								 }
							 }	
							 
							 function check_recover(){
								 if(check_list2.length){									 
									 return true;
								 }
								 else 
								 	 return false;								 
							 }							 
		                </script>                        
                                <table class="table table-striped table-bordered table-hover" id="dataTables-midware-history">
                                    <thead>
                                        <tr>
                                            <th><input type="checkbox" name="chk_all2" id="chk_all2"/><span> </span>选择</th>
                                            <th>设备厂商</th>                                    
                                            <th>中间件版本</th>   
                                            <th>设配型号</th>       
                                            <th>提交时间</th>  
                                            <th>用户id</th>
                                            <th>审核状态</th>                                              
                                        </tr>
                                    </thead>
                                    {% if midware_review %}
                                    <tbody id="midware-history-body">
                                    <!-- 样式
                                        <tr>
                                            <td><input type="checkbox" name="transPro2" value="message1"></td>
                                            <td>华为</td>
                                            <td>卫星链路</td>                                            
                                            <td>GTM</td>
                                            <td>版本1.0</td>  
                                            <td>2014-11-06 14:54:03</td> 
                                            <td>用户id</td>     
                                            <td>审核通过</td>                                                
                                        </tr>
                                        -->
										{% for u in midware_review %}
										<tr>
                                            <td><input type="checkbox" name="transPro2" value={{forloop.counter0}}{{forloop.counter0}}></td>
                                            {% for item in u %}
                                            	{% ifequal forloop.counter0 4 %}
	                                            	<td>{{item}}</td>   
                                                {% else %}
		                                            <td>{{item}}</td>     
                                                {% endifequal %}                                                   
                                            {% endfor %}										
										</tr>
										{% endfor %}  
                                    </tbody>
                                    {% endif %}
                                </table>
                            </div>
                            
                           
                        </div>
                        <div class="panel-footer">                                                                                    
							<script type="text/javascript">
                                 $(document).on("click","#allSelect2",function(){
                                 var $checkboxs =$("input[name='transPro2']");
                                 $checkboxs.prop("checked",true);
                                 });
                                 
                                 $(document).on("click","#noneSelect2",function(){
                                 var $checkboxs =$("input[name='transPro2']");
                                 $checkboxs.prop("checked",false);
                                 });
                            </script>   							
                            <form method="post" onSubmit="return check_recover()">	
								{% csrf_token %}                            						
                                <a href="javascript:void(0)" id="allSelect2" >全部</a>
                                <a >-</a>                        
                                <a href="javascript:void(0)" id="noneSelect2" >无</a>
                                <a >-</a>   
                                <input type="hidden" name="content3" id="hidden-value3"></input>                      
                                <input type="submit" class="btn btn-primary" name="recover" value="恢复所选"></input>           
                                <button type="button" class="btn btn-primary">删除所选</button>
                            </form>                            
                        </div>
 
                    </div>
                </div>
                <!--col-lg-12-->
            </div>
        
        
        
        
        
        </div>
        <!-- /#page-wrapper -->

    </div>
    <!-- /#wrapper -->


    <!-- Page-Level Demo Scripts - Notifications - Use for reference -->
    <script>
    // tooltip demo
    $('.tooltip-demo').tooltip({
        selector: "[data-toggle=tooltip]",
        container: "body"
    })

    // popover demo
    $("[data-toggle=popover]")
        .popover()
    </script>

</body>

</html>
